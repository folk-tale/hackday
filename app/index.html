<!DOCTYPE html>
<html>

  <head>

    <title>JSON/Atom Custom Search API Example</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <link rel="stylesheet" href="styles/speech.css" />
    <link rel="stylesheet" href="styles/style.css" />

    <!-- Javascript NLP library (See https://github.com/spencermountain/nlp_compromise) -->
    <script src="scripts/nlp.min.js"></script>

    <!-- jQuery and jQuery UI -->
    <script src="scripts/jquery-1.10.2.js"></script>
    <script src="scripts/jquery-ui.js"></script>
    <link rel="stylesheet" href="styles/jquery-ui.css" />

  </head>

  <body>

    <!-- Unneeded HTML from WebSpeech demo -->
    <div style="display: none;">
      <div id="info">
        <!-- deleted -->
      </div>

      <div class="right">
        <!-- deleted -->
      </div>

      <div id="results">
        <span id="final_span" class="final"></span>
        <span id="interim_span" class="interim"></span>
        <p>
      </div> 

      <div class="center">
        <div class="sidebyside" style="text-align:right">
          <button id="copy_button" class="button" onclick="copyButton()">
            Copy and Paste</button>
        </div>
        <div class="sidebyside">
          <button id="email_button" class="button" onclick="emailButton()">
            Create Email</button>
          <div id="email_info" class="info">
            Text sent to default email application.<br>
            (See chrome://settings/handlers to change.)
          </div>
        </div>

        <div id="div_language" style="display: none;">
          <select id="select_language" onchange="updateCountry()"></select>
          &nbsp;&nbsp;
          <select id="select_dialect"></select>
        </div>
      </div>
    </div>

    <div class="container">

      <div class="search-bar-container">
        <form action="javascript:searchAll()" accept-charset="utf-8">
          <input type="text" class="search-input" id="queryfield" placeholder="Enter a sentence..." name="q"></input>
          <button type="submit" class="search-submit" id="submitbutton">Go</button>
          <button id="start_button" onclick="startButton(event)">
            <img id="start_img" src="images/mic.gif" alt="Start">
          </button>
        </form>
      </div> <!-- searchbar-container -->

      <div class="backstage-container">

        <div id="terms-container">
          <h5>Search terms</h5>
          <hr />
          <div id="terms"></div>
        </div> <!-- terms-container -->

        <div id="results-container">
          <h5>Search results</h5>
          <hr />
          <div class="results" id="content"></div>
        </div> <!-- results-container -->

      </div> <!-- backstage-container -->

      <div class="stage-container">
        <br />
        <div id="stage-inner">
          <div id="stage"></div>
          <div id="prev-stage">&lsaquo;</div>
          <div id="next-stage">&rsaquo;</div>
        </div>
      </div> <!-- stage-container -->

    </div> <!-- container -->

    <footer>
      <div id="invite-wrapper">
        <div id="invite-text"></div>
        <!-- TODO: Make this a textarea for select to work -->
        <div id="invite-link"></div>
        <script type="text/javascript">
          // Callback function invoked once the user has authorized
          // (We can't get the share link until the user has authorized)
          function userDidAuthorize() {
            var link = document.getElementById("invite-link");
            link.textContent = window.location.href;
            link.addEventListener("click", function() {

            });
            var people = ["Grandma", "Grandpa", "Mom", "Dad", "Auntie", "Uncle"];
            var randomPerson = people[Math.floor(Math.random() * people.length)];
            var text = document.getElementById("invite-text");
            text.textContent = "Invite " + randomPerson + "! (click to copy link):";
          }
          // Copy-on-click (uses some *very* new features....support might
          // not be widespread but as long as you're on Chrome you'll prolly
          // be okay.)
          document.querySelector('#invite-link').addEventListener("click", function() {
            this.select();
            try {
              var successful = document.execCommand('copy');
              var msg = successful ? 'successful' : 'unsuccessful';
              console.log('Copying text command was ' + msg);
            } catch (err) {
              console.log('Oops, unable to copy');
            }
          });
        </script>
      </div>
    </footer>
    
    <!-- Note: Order of scripts below is important!!! -->

    <!-- Synchronization with Realtime API -->
    <script src="scripts/realtime-api.js"></script>
    <script src="scripts/realtime-client-utils.js"></script>
    <script src="scripts/prop.js"></script>

    <!-- Dragging and dropping with jQuery -->
    <script src="scripts/stage.js"></script>

    <!-- Image search -->
    <script src="scripts/search.js"></script>

    <!-- Speech processing -->
    <script src="scripts/speech.js"></script>

    <!-- Photopicker for background images -->
    <script src="scripts/photopicker.js"></script>

    <!-- Google APIs -->
    <script type="text/javascript" src="https://apis.google.com/js/api.js?onload=authorize"></script>

  </body>

</html>
